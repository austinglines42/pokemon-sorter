{% extends 'base.html' %}
{% import 'WTForms.html' as wtforms %}

{% block title %}Pokemon Sorter{% endblock title %}
{% block content %}

{% if saveData %}
    <div id="save-div" class="d-none">{{saveData}}</div>
{% endif %}
<div id='sort-container' style='height: 90vh;  width: 100vw;'
    class="position-static container row position-relative mx-auto d-none border border-dark rounded bg-secondary m-auto py-2 px-4">
    <div id='pokemon-1-container' style="min-height: 100%;" class="col-4 container pr-auto row rounded mr-auto py-3">
        <img class='img-fluid img-thumbnail p-0 m-0 bg-success rounded' src=''>
        <div class="m-0 px-0 ">
            <table
                class='pokemon-stat-table table table-striped table-responsive table-dark border border-dark text-center'
                style="height:100%">
                <tbody>
                    <tr>
                        <td style='width:30%'>
                            Id
                        </td>
                        <td><span class='pokemon-id'></span></td>
                    </tr>
                    <tr>
                        <td>Name</td>
                        <td><span class='pokemon-name'></span></td>
                    </tr>
                    <tr>
                        <td>Region</td>
                        <td><span class='pokemon-region'></span></td>
                    </tr>
                    <tr>
                        <td>Types</td>
                        <td><span class='pokemon-type'><span class="waiting-update invisible"></span></span></td>
                    </tr>
                    <tr>
                        <td colspan="3">
                            <button style="width:100%; height: 100%; font-size: 2rem;" class="m-0 p-0 btn btn-success"
                                type='button' data-bs-toggle="offcanvas" data-bs-target="#move1Canvas"
                                aria-controls="move1Canvas" id='move-1-button'>Moves</button>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="3">
                            <button id='choose-1' style="width:100%; height: 100%; font-size: 2rem"
                                class="m-0 p-0 btn btn-info">Best Pokemon</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div id="sort-controller" class="col-4 py-3 mx-auto px-0 rounded">
        <button id='delete-save-data' class='btn block-btn float-end h-25 mx-auto btn-outline-danger w-100 p-0 mb-3 '>
            <h1>Start over</h1>
        </button>
        <button id='save-progress' class='btn block-btn float-end h-25 mx-auto btn-outline-info w-100 p-0 '>
            <h1>Save</h1>
        </button>
    </div>

    <div id='pokemon-2-container' style="min-height: 100%;" class=" col-4 container row m-0 px-0 rounded py-3">
        <img class='img-fluid img-thumbnail p-0 m-0 bg-success rounded' src=''>
        <div class="m-0 px-0 ">
            <table
                class='pokemon-stat-table table table-striped table-responsive table-dark border border-dark text-center'
                style="height:100%">
                <tbody>
                    <tr>
                        <td style='width:30%'>
                            Id
                        </td>
                        <td colspan="2" class='pokemon-id'></td>
                    </tr>
                    <tr>
                        <td>Name</td>
                        <td colspan="2" class='pokemon-name'></td>
                    </tr>
                    <tr>
                        <td>Region</td>
                        <td colspan="2" class='pokemon-region'></td>
                    </tr>
                    <tr>
                        <td>Types</td>
                        <td><span class='pokemon-type'></span></td>
                    </tr>
                    <tr>
                        <td colspan="3">
                            <button style="width:100%; height: 100%; font-size: 2rem;" class="m-0 p-0 btn btn-success"
                                type='button' data-bs-toggle="offcanvas" data-bs-target="#move2Canvas"
                                aria-controls="move2Canvas" id='move-2-button'>Moves</button>
                        </td>

                    </tr>
                    <tr>
                        <td colspan="3">
                            <button id='choose-2' style="width:100%; height: 100%; font-size: 2rem"
                                class="m-0 p-0 btn btn-info">Best Pokemon</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>


<div id="loading-spinner" class="position-absolute mt-5 pt-5 top-50 start-50 translate-middle d-none">
    <div class="spinner-border p-3" role="status">
        <span class="visually-hidden">Loading...</span>
    </div>
</div>

<div class="offcanvas offcanvas-start" tabindex="-1" id="move1Canvas" aria-labelledby="move1CanvasLabel">
    <div class="offcanvas-header">
        <h5 id="move1CanvasLabel" class="mx-auto">Move list</h5>
        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body row">
        <div id='move-1-table' class="overflow-auto move-table p-0 m-0" style="max-height: 99%"></div>
    </div>
</div>
<div class="offcanvas offcanvas-end" tabindex="-1" id="move2Canvas" aria-labelledby="move2CanvasLabel">
    <div class="offcanvas-header">
        <h5 id="move2CanvasLabel" class='mx-auto'>Move list</h5>
        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body row">
        <div id='move-2-table' class="overflow-auto p-0 m-0 move-table" style="max-height: 99%">
        </div>
    </div>
</div>

<div id='generation-form-container' class="container row mx-auto rounded bg-secondary p-4 ">
    {{ wtforms.generation() }}
</div>
<div id="image-preloader-container">
    <img id='image-preloader' style="width:0px; height:0px;" class='position-absolute' src=''>
</div>
<img style="width:0px; height:0px;" class='position-absolute' src=''>

{% endblock content %}
{% block scripts %}
<script src="https://unpkg.com/axios/dist/axios.js"></script>
<script language="javascript" src="/static/js/lz-string.js"></script>
<script src="/static/js/sort.js"></script>
{% endblock scripts %}